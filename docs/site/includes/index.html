
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../basic/">
      
      
        <link rel="next" href="../use-in-agents/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Includes For Organized Prompts - MARGARITA</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-includes-in-python-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../..">

    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL(".."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MARGARITA" class="md-header__button md-logo" aria-label="MARGARITA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.5 11H19V7a2 2 0 0 0-2-2h-4V3.5A2.5 2.5 0 0 0 10.5 1 2.5 2.5 0 0 0 8 3.5V5H4a2 2 0 0 0-2 2v3.8h1.5c1.5 0 2.7 1.2 2.7 2.7S5 16.2 3.5 16.2H2V20a2 2 0 0 0 2 2h3.8v-1.5c0-1.5 1.2-2.7 2.7-2.7s2.7 1.2 2.7 2.7V22H17a2 2 0 0 0 2-2v-4h1.5a2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MARGARITA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Includes For Organized Prompts
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/banyango/margarita" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    banyango/margarita
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href=".." class="md-tabs__link">
          
  
  
    
  
  ðŸ“š Documentation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MARGARITA" class="md-nav__button md-logo" aria-label="MARGARITA" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.5 11H19V7a2 2 0 0 0-2-2h-4V3.5A2.5 2.5 0 0 0 10.5 1 2.5 2.5 0 0 0 8 3.5V5H4a2 2 0 0 0-2 2v3.8h1.5c1.5 0 2.7 1.2 2.7 2.7S5 16.2 3.5 16.2H2V20a2 2 0 0 0 2 2h3.8v-1.5c0-1.5 1.2-2.7 2.7-2.7s2.7 1.2 2.7 2.7V22H17a2 2 0 0 0 2-2v-4h1.5a2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5"/></svg>

    </a>
    MARGARITA
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/banyango/margarita" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    banyango/margarita
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href=".." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    ðŸ“š Documentation
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    ðŸ“š Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Language Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Language Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contexts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contexts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metadata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conditionals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Conditionals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loops
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../include_files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Include Files
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Python API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Includes For Organized Prompts
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Includes For Organized Prompts
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-include-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Include Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Include Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-renderer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Up the Renderer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-reusable-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Reusable Snippets
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Reusable Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-prompt-building-blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Prompt Building Blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the Snippets
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-include-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dynamic Include Loading
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Include Loading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#margaritacomposer" class="md-nav__link">
    <span class="md-ellipsis">
      
        MargaritaComposer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditional-snippet-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Snippet Loading
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conditional Snippet Loading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-conditionals-with-includes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Conditionals with Includes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-includes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nested Includes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nested Includes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-base-path-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Base Path Resolution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-nested-include-rendering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Nested Include Rendering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deep-nesting-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deep Nesting Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-base-path-matters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why Base Path Matters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#practical-tip-organizing-nested-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Practical Tip: Organizing Nested Structures
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-organize-snippets-by-purpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Organize Snippets by Purpose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-use-descriptive-naming" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Use Descriptive Naming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-keep-snippets-focused" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Keep Snippets Focused
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-document-snippet-context-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Document Snippet Context Requirements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-cache-parsed-templates" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Cache Parsed Templates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-example-multi-agent-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Real-World Example: Multi-Agent System
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../use-in-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agentic Loops
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-include-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Include Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic Include Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-renderer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting Up the Renderer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-reusable-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating Reusable Snippets
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating Reusable Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-prompt-building-blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Prompt Building Blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using the Snippets
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-include-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dynamic Include Loading
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dynamic Include Loading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#margaritacomposer" class="md-nav__link">
    <span class="md-ellipsis">
      
        MargaritaComposer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditional-snippet-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditional Snippet Loading
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conditional Snippet Loading">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-conditionals-with-includes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using Conditionals with Includes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-includes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nested Includes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nested Includes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-base-path-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Base Path Resolution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-nested-include-rendering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Nested Include Rendering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deep-nesting-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deep Nesting Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-base-path-matters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why Base Path Matters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#practical-tip-organizing-nested-structures" class="md-nav__link">
    <span class="md-ellipsis">
      
        Practical Tip: Organizing Nested Structures
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Handling
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-organize-snippets-by-purpose" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Organize Snippets by Purpose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-use-descriptive-naming" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Use Descriptive Naming
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-keep-snippets-focused" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Keep Snippets Focused
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-document-snippet-context-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Document Snippet Context Requirements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-cache-parsed-templates" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Cache Parsed Templates
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-example-multi-agent-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Real-World Example: Multi-Agent System
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="using-includes-in-python-api">Using Includes in Python API<a class="headerlink" href="#using-includes-in-python-api" title="Permanent link">&para;</a></h1>
<p>MARGARITA's include functionality allows you to compose templates from reusable snippets, making it easy to build modular, maintainable prompt libraries. This page covers how to use includes programmatically through the Python API.</p>
<h2 id="basic-include-usage">Basic Include Usage<a class="headerlink" href="#basic-include-usage" title="Permanent link">&para;</a></h2>
<h3 id="setting-up-the-renderer">Setting Up the Renderer<a class="headerlink" href="#setting-up-the-renderer" title="Permanent link">&para;</a></h3>
<p>The key to using includes is setting the <code>base_path</code> parameter when creating a <code>Renderer</code>. This tells MARGARITA where to resolve relative include paths:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.renderer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Renderer</span>

<span class="c1"># Define base path for includes</span>
<span class="n">template_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./templates&quot;</span><span class="p">)</span>

<span class="c1"># Parse your main template</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
<span class="n">template_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;header.marg&quot; %}</span>

<span class="s2">Main content here.</span>

<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;footer.marg&quot; %}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">metadata</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">template_content</span><span class="p">)</span>

<span class="c1"># Create renderer with base_path</span>
<span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;app_name&quot;</span><span class="p">:</span> <span class="s2">&quot;MyApp&quot;</span><span class="p">},</span>
    <span class="n">base_path</span><span class="o">=</span><span class="n">template_dir</span>
<span class="p">)</span>

<span class="c1"># Render - includes will be resolved relative to base_path</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</code></pre></div>
<h2 id="creating-reusable-snippets">Creating Reusable Snippets<a class="headerlink" href="#creating-reusable-snippets" title="Permanent link">&para;</a></h2>
<h3 id="example-prompt-building-blocks">Example: Prompt Building Blocks<a class="headerlink" href="#example-prompt-building-blocks" title="Permanent link">&para;</a></h3>
<p>Create a library of reusable prompt components:</p>
<p><strong>templates/snippets/system_role.marg</strong>:
<div class="highlight"><pre><span></span><code>You are {{role}}, a helpful AI assistant.
</code></pre></div></p>
<p><strong>templates/snippets/task_context.marg</strong>:
<div class="highlight"><pre><span></span><code>## Task Context

User: {{user_name}}
Session: {{session_id}}
Timestamp: {{timestamp}}
</code></pre></div></p>
<p><strong>templates/snippets/output_format.marg</strong>:
<div class="highlight"><pre><span></span><code>## Output Requirements

- Provide responses in {{format}} format
- Keep responses {{length}}
- Use {{tone}} tone
</code></pre></div></p>
<h3 id="using-the-snippets">Using the Snippets<a class="headerlink" href="#using-the-snippets" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.renderer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Renderer</span>

<span class="c1"># Main template that composes snippets</span>
<span class="n">main_template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;snippets/system_role.marg&quot; %}</span>

<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;snippets/task_context.marg&quot; %}</span>

<span class="s2">## User Request</span>

<span class="s2">{{user_request}}</span>

<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;snippets/output_format.marg&quot; %}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="c1"># Parse and render</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
<span class="n">_</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">main_template</span><span class="p">)</span>

<span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;technical expert&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">,</span>
        <span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="s2">&quot;sess_123&quot;</span><span class="p">,</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2024-01-19T10:30:00Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user_request&quot;</span><span class="p">:</span> <span class="s2">&quot;Explain quantum computing&quot;</span><span class="p">,</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;markdown&quot;</span><span class="p">,</span>
        <span class="s2">&quot;length&quot;</span><span class="p">:</span> <span class="s2">&quot;concise&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tone&quot;</span><span class="p">:</span> <span class="s2">&quot;professional&quot;</span>
    <span class="p">},</span>
    <span class="n">base_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./templates&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
</code></pre></div>
<h2 id="dynamic-include-loading">Dynamic Include Loading<a class="headerlink" href="#dynamic-include-loading" title="Permanent link">&para;</a></h2>
<h3 id="margaritacomposer">MargaritaComposer<a class="headerlink" href="#margaritacomposer" title="Permanent link">&para;</a></h3>
<p>Include complex prompts dynamically using <code>Composer</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.composer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Composer</span>

<span class="c1"># Usage</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">Composer</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./templates&quot;</span><span class="p">))</span>

<span class="c1"># Compose a complex prompt from multiple snippets</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">compose_prompt</span><span class="p">(</span>
    <span class="n">snippets</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">&quot;snippets/system_role.marg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;snippets/task_context.marg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;snippets/chain_of_thought.marg&quot;</span><span class="p">,</span>
        <span class="s2">&quot;snippets/output_format.marg&quot;</span>
    <span class="p">],</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;data scientist&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
        <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="s2">&quot;Analyze customer churn&quot;</span><span class="p">,</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;JSON&quot;</span><span class="p">,</span>
        <span class="s2">&quot;tone&quot;</span><span class="p">:</span> <span class="s2">&quot;analytical&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="conditional-snippet-loading">Conditional Snippet Loading<a class="headerlink" href="#conditional-snippet-loading" title="Permanent link">&para;</a></h2>
<h3 id="using-conditionals-with-includes">Using Conditionals with Includes<a class="headerlink" href="#using-conditionals-with-includes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">margarita.parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.renderer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Renderer</span>
<span class="c1"># Template with conditional includes</span>
<span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;snippets/system_role.marg&quot; %}</span>

<span class="s2">{</span><span class="si">% i</span><span class="s2">f use_examples %}</span>
<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;snippets/few_shot_examples.marg&quot; %}</span>
<span class="s2">{</span><span class="si">% e</span><span class="s2">ndif %}</span>

<span class="s2">## Task</span>

<span class="s2">{{task}}</span>

<span class="s2">{</span><span class="si">% i</span><span class="s2">f detailed_output %}</span>
<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;snippets/detailed_format.marg&quot; %}</span>
<span class="s2">{</span><span class="si">% e</span><span class="s2">lse %}</span>
<span class="s2">{</span><span class="si">% i</span><span class="s2">nclude &quot;snippets/brief_format.marg&quot; %}</span>
<span class="s2">{</span><span class="si">% e</span><span class="s2">ndif %}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
<span class="n">_</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="c1"># Render with detailed mode</span>
<span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">,</span>
        <span class="s2">&quot;use_examples&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;task&quot;</span><span class="p">:</span> <span class="s2">&quot;Summarize the article&quot;</span><span class="p">,</span>
        <span class="s2">&quot;detailed_output&quot;</span><span class="p">:</span> <span class="kc">True</span>
    <span class="p">},</span>
    <span class="n">base_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./templates&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</code></pre></div>
<h2 id="nested-includes">Nested Includes<a class="headerlink" href="#nested-includes" title="Permanent link">&para;</a></h2>
<p>Includes can reference other includes, creating a hierarchy of snippets. <strong>Important</strong>: All include paths are always resolved relative to the <code>base_path</code> set in the renderer, not relative to the file doing the including.</p>
<h3 id="understanding-base-path-resolution">Understanding Base Path Resolution<a class="headerlink" href="#understanding-base-path-resolution" title="Permanent link">&para;</a></h3>
<p>Given this directory structure:</p>
<div class="highlight"><pre><span></span><code>templates/
  main.marg
  snippets/
    complete_prompt.marg
    header_section.marg
    system_role.marg
    safety_guidelines.marg
    body_section.marg
    footer_section.marg
</code></pre></div>
<p><strong>templates/snippets/complete_prompt.marg</strong>:
<div class="highlight"><pre><span></span><code>{% include &quot;snippets/header_section.marg&quot; %}

{% include &quot;snippets/body_section.marg&quot; %}

{% include &quot;snippets/footer_section.marg&quot; %}
</code></pre></div></p>
<p><strong>templates/snippets/header_section.marg</strong>:
<div class="highlight"><pre><span></span><code>{% include &quot;snippets/system_role.marg&quot; %}

{% include &quot;snippets/safety_guidelines.marg&quot; %}
</code></pre></div></p>
<p>Notice that even though <code>header_section.marg</code> is in the <code>snippets/</code> directory, it <strong>still uses <code>"snippets/system_role.marg"</code></strong> in its include statement, not just <code>"system_role.marg"</code>. This is because all paths are resolved from <code>base_path</code>.</p>
<h3 id="example-nested-include-rendering">Example: Nested Include Rendering<a class="headerlink" href="#example-nested-include-rendering" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.renderer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Renderer</span>

<span class="c1"># Parse the main template</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
<span class="n">_</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;{</span><span class="si">% i</span><span class="s1">nclude &quot;snippets/complete_prompt.marg&quot; %}&#39;</span><span class="p">)</span>

<span class="c1"># Set base_path to templates/</span>
<span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;assistant&quot;</span><span class="p">},</span>
    <span class="n">base_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./templates&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># All includes are resolved from ./templates/</span>
<span class="c1"># - snippets/complete_prompt.marg -&gt; ./templates/snippets/complete_prompt.marg</span>
<span class="c1"># - snippets/header_section.marg -&gt; ./templates/snippets/header_section.marg</span>
<span class="c1"># - snippets/system_role.marg -&gt; ./templates/snippets/system_role.marg</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</code></pre></div>
<h3 id="deep-nesting-example">Deep Nesting Example<a class="headerlink" href="#deep-nesting-example" title="Permanent link">&para;</a></h3>
<p>You can nest includes as deeply as needed:</p>
<p><strong>templates/layouts/full_prompt.marg</strong>:
<div class="highlight"><pre><span></span><code>{% include &quot;sections/preamble.marg&quot; %}

{% include &quot;sections/main_content.marg&quot; %}

{% include &quot;sections/conclusion.marg&quot; %}
</code></pre></div></p>
<p><strong>templates/sections/preamble.marg</strong>:
<div class="highlight"><pre><span></span><code>{% include &quot;components/header.marg&quot; %}

{% include &quot;components/instructions.marg&quot; %}
</code></pre></div></p>
<p><strong>templates/components/header.marg</strong>:
<div class="highlight"><pre><span></span><code>{% include &quot;atoms/logo.marg&quot; %}

{% include &quot;atoms/title.marg&quot; %}
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># All paths resolve from base_path, no matter how deep the nesting</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
<span class="n">_</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;{</span><span class="si">% i</span><span class="s1">nclude &quot;layouts/full_prompt.marg&quot; %}&#39;</span><span class="p">)</span>

<span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;My Prompt&quot;</span><span class="p">},</span>
    <span class="n">base_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./templates&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</code></pre></div>
<h3 id="why-base-path-matters">Why Base Path Matters<a class="headerlink" href="#why-base-path-matters" title="Permanent link">&para;</a></h3>
<p>This design makes your templates portable and predictable:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># âœ… CORRECT: All paths from base_path</span>
<span class="c1"># templates/snippets/section.marg contains:</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;snippets/subsection.marg&quot;</span> <span class="o">%</span><span class="p">}</span>

<span class="c1"># âŒ WRONG: Don&#39;t use relative paths from the current file</span>
<span class="c1"># templates/snippets/section.marg should NOT contain:</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;subsection.marg&quot;</span> <span class="o">%</span><span class="p">}</span>  <span class="c1"># This won&#39;t work!</span>
</code></pre></div>
<h3 id="practical-tip-organizing-nested-structures">Practical Tip: Organizing Nested Structures<a class="headerlink" href="#practical-tip-organizing-nested-structures" title="Permanent link">&para;</a></h3>
<p>Use consistent path prefixes to make nested includes clear:</p>
<div class="highlight"><pre><span></span><code>templates/
  prompts/
    agent/
      researcher.marg    -&gt; includes &quot;components/agent/...&quot;
      analyzer.marg      -&gt; includes &quot;components/agent/...&quot;
  components/
    agent/
      role.marg          -&gt; includes &quot;atoms/agent/...&quot;
      tools.marg         -&gt; includes &quot;atoms/agent/...&quot;
  atoms/
    agent/
      identity.marg
      capabilities.marg
</code></pre></div>
<p>This structure makes it obvious that all includes use the full path from <code>templates/</code>.</p>
<h2 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<p>Always handle include errors gracefully:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.renderer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Renderer</span>


<span class="k">def</span><span class="w"> </span><span class="nf">safe_render</span><span class="p">(</span><span class="n">template_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">base_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Safely render a template with error handling.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">template_content</span><span class="p">)</span>

        <span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">base_path</span><span class="o">=</span><span class="n">base_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Handle missing include files</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: Include file not found - </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">template_content</span>  <span class="c1"># Return unrendered template</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Handle other rendering errors</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error rendering template: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>


<span class="c1"># Usage</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">safe_render</span><span class="p">(</span>
    <span class="s1">&#39;{</span><span class="si">% i</span><span class="s1">nclude &quot;optional_snippet.marg&quot; %}</span><span class="se">\n</span><span class="s1">Main content.&#39;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">base_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./templates&quot;</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<h3 id="1-organize-snippets-by-purpose">1. Organize Snippets by Purpose<a class="headerlink" href="#1-organize-snippets-by-purpose" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>templates/
  snippets/
    system/
      role_definitions.marg
      safety_guidelines.marg
    formatting/
      json_output.marg
      markdown_output.marg
    examples/
      few_shot_classification.marg
      few_shot_extraction.marg
    sections/
      header.marg
      footer.marg
</code></pre></div>
<h3 id="2-use-descriptive-naming">2. Use Descriptive Naming<a class="headerlink" href="#2-use-descriptive-naming" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Good: Clear, descriptive names</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;snippets/system/expert_role.marg&quot;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;snippets/formatting/structured_json_output.marg&quot;</span> <span class="o">%</span><span class="p">}</span>

<span class="c1"># Avoid: Vague names</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;snippets/s1.marg&quot;</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s2">&quot;snippets/format.marg&quot;</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<h3 id="3-keep-snippets-focused">3. Keep Snippets Focused<a class="headerlink" href="#3-keep-snippets-focused" title="Permanent link">&para;</a></h3>
<p>Each snippet should have a single, clear purpose:</p>
<div class="highlight"><pre><span></span><code># Good: Focused snippet
# file: role_definition.marg
You are a {{role}} with expertise in {{domain}}.
</code></pre></div>
<div class="highlight"><pre><span></span><code># Avoid: Mixing multiple concerns
# file: everything.marg
You are a {{role}}.
Task: {{task}}
Output format: {{format}}
</code></pre></div>
<h3 id="4-document-snippet-context-requirements">4. Document Snippet Context Requirements<a class="headerlink" href="#4-document-snippet-context-requirements" title="Permanent link">&para;</a></h3>
<p>Add metadata to snippets documenting required context variables:</p>
<div class="highlight"><pre><span></span><code>---
name: role-definition
version: 1.0.0
required_context:
  - role
  - domain
  - expertise_level
---

You are a {{role}} with {{expertise_level}} expertise in {{domain}}.
</code></pre></div>
<h3 id="5-cache-parsed-templates">5. Cache Parsed Templates<a class="headerlink" href="#5-cache-parsed-templates" title="Permanent link">&para;</a></h3>
<p>Parse templates once, render many times:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OptimizedRenderer</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template_dir</span> <span class="o">=</span> <span class="n">template_dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parsed_cache</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">cache_key</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">template_content</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cache_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsed_cache</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">template_content</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parsed_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsed_cache</span><span class="p">[</span><span class="n">cache_key</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_nodes</span><span class="p">(</span><span class="n">template_content</span><span class="p">)</span>
        <span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">base_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template_dir</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
</code></pre></div>
<h2 id="real-world-example-multi-agent-system">Real-World Example: Multi-Agent System<a class="headerlink" href="#real-world-example-multi-agent-system" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">Parser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">margarita.renderer</span><span class="w"> </span><span class="kn">import</span> <span class="n">Renderer</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AgentPromptBuilder</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build prompts for different agent types using snippets.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">snippets_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snippets_dir</span> <span class="o">=</span> <span class="n">snippets_dir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_agent_prompt</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">agent_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">task</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="n">context</span><span class="p">:</span> <span class="nb">dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build a prompt for a specific agent type.&quot;&quot;&quot;</span>

        <span class="c1"># Map agent types to snippet combinations</span>
        <span class="n">snippet_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;researcher&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;roles/researcher.marg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;capabilities/web_search.marg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;output/structured_findings.marg&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;analyzer&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;roles/analyzer.marg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;capabilities/data_analysis.marg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;output/insights_report.marg&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;writer&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;roles/writer.marg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;capabilities/content_creation.marg&quot;</span><span class="p">,</span>
                <span class="s2">&quot;output/polished_text.marg&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>

        <span class="n">snippets</span> <span class="o">=</span> <span class="n">snippet_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">agent_type</span><span class="p">,</span> <span class="p">[])</span>

        <span class="c1"># Build the main template</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="se">{{</span><span class="s1">% include &quot;</span><span class="si">{</span><span class="n">snippet</span><span class="si">}</span><span class="s1">&quot; %</span><span class="se">}}</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">snippet</span> <span class="ow">in</span> <span class="n">snippets</span>
        <span class="p">])</span>

        <span class="n">template</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">## Current Task</span><span class="se">\n\n</span><span class="si">{</span><span class="n">task</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Render</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="n">renderer</span> <span class="o">=</span> <span class="n">Renderer</span><span class="p">(</span>
            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
            <span class="n">base_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">snippets_dir</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>


<span class="c1"># Usage</span>
<span class="n">builder</span> <span class="o">=</span> <span class="n">AgentPromptBuilder</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./agent_snippets&quot;</span><span class="p">))</span>

<span class="c1"># Build a researcher agent prompt</span>
<span class="n">researcher_prompt</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">build_agent_prompt</span><span class="p">(</span>
    <span class="n">agent_type</span><span class="o">=</span><span class="s2">&quot;researcher&quot;</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="s2">&quot;Find the latest developments in quantum computing&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;expertise&quot;</span><span class="p">:</span> <span class="s2">&quot;quantum physics&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sources&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;arxiv&quot;</span><span class="p">,</span> <span class="s2">&quot;google scholar&quot;</span><span class="p">],</span>
        <span class="s2">&quot;depth&quot;</span><span class="p">:</span> <span class="s2">&quot;comprehensive&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Build an analyzer agent prompt</span>
<span class="n">analyzer_prompt</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">build_agent_prompt</span><span class="p">(</span>
    <span class="n">agent_type</span><span class="o">=</span><span class="s2">&quot;analyzer&quot;</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="s2">&quot;Analyze customer feedback trends&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;data_source&quot;</span><span class="p">:</span> <span class="s2">&quot;customer_reviews.json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;analysis_type&quot;</span><span class="p">:</span> <span class="s2">&quot;sentiment&quot;</span><span class="p">,</span>
        <span class="s2">&quot;output_format&quot;</span><span class="p">:</span> <span class="s2">&quot;executive_summary&quot;</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../basic/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Basic Usage">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Basic Usage
              </div>
            </div>
          </a>
        
        
          
          <a href="../use-in-agents/" class="md-footer__link md-footer__link--next" aria-label="Next: Agentic Loops">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Agentic Loops
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["search.highlight", "navigation.sections", "content.code.annotate", "navigation.instant", "navigation.tabs", "navigation.footer", "navigation.indexes"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>